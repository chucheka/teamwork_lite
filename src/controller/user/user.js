"use strict";

var cov_24uy7faoai = function () {
  var path = "C:\\Users\\UCHEKA CHUKWUKELEUBA\\Desktop\\DevC\\teamwork_lite\\api\\controller\\user\\user.js";
  var hash = "e266ca44cafeeb3bbdb0897773a07e09b4e4260c";
  var global = new Function("return this")();
  var gcv = "__coverage__";
  var coverageData = {
    path: "C:\\Users\\UCHEKA CHUKWUKELEUBA\\Desktop\\DevC\\teamwork_lite\\api\\controller\\user\\user.js",
    statementMap: {
      "0": {
        start: {
          line: 11,
          column: 16
        },
        end: {
          line: 11,
          column: 43
        }
      },
      "1": {
        start: {
          line: 12,
          column: 18
        },
        end: {
          line: 12,
          column: 32
        }
      },
      "2": {
        start: {
          line: 13,
          column: 2
        },
        end: {
          line: 18,
          column: 3
        }
      },
      "3": {
        start: {
          line: 14,
          column: 3
        },
        end: {
          line: 17,
          column: 6
        }
      },
      "4": {
        start: {
          line: 19,
          column: 89
        },
        end: {
          line: 19,
          column: 97
        }
      },
      "5": {
        start: {
          line: 21,
          column: 2
        },
        end: {
          line: 69,
          column: 6
        }
      },
      "6": {
        start: {
          line: 24,
          column: 4
        },
        end: {
          line: 65,
          column: 5
        }
      },
      "7": {
        start: {
          line: 25,
          column: 5
        },
        end: {
          line: 28,
          column: 8
        }
      },
      "8": {
        start: {
          line: 30,
          column: 5
        },
        end: {
          line: 64,
          column: 8
        }
      },
      "9": {
        start: {
          line: 32,
          column: 6
        },
        end: {
          line: 63,
          column: 9
        }
      },
      "10": {
        start: {
          line: 33,
          column: 7
        },
        end: {
          line: 33,
          column: 26
        }
      },
      "11": {
        start: {
          line: 33,
          column: 16
        },
        end: {
          line: 33,
          column: 26
        }
      },
      "12": {
        start: {
          line: 34,
          column: 22
        },
        end: {
          line: 34,
          column: 96
        }
      },
      "13": {
        start: {
          line: 35,
          column: 7
        },
        end: {
          line: 62,
          column: 11
        }
      },
      "14": {
        start: {
          line: 38,
          column: 9
        },
        end: {
          line: 58,
          column: 10
        }
      },
      "15": {
        start: {
          line: 39,
          column: 57
        },
        end: {
          line: 39,
          column: 71
        }
      },
      "16": {
        start: {
          line: 40,
          column: 26
        },
        end: {
          line: 47,
          column: 11
        }
      },
      "17": {
        start: {
          line: 48,
          column: 10
        },
        end: {
          line: 57,
          column: 13
        }
      },
      "18": {
        start: {
          line: 49,
          column: 11
        },
        end: {
          line: 56,
          column: 14
        }
      },
      "19": {
        start: {
          line: 61,
          column: 9
        },
        end: {
          line: 61,
          column: 32
        }
      },
      "20": {
        start: {
          line: 68,
          column: 4
        },
        end: {
          line: 68,
          column: 21
        }
      },
      "21": {
        start: {
          line: 80,
          column: 16
        },
        end: {
          line: 80,
          column: 45
        }
      },
      "22": {
        start: {
          line: 81,
          column: 18
        },
        end: {
          line: 81,
          column: 32
        }
      },
      "23": {
        start: {
          line: 82,
          column: 2
        },
        end: {
          line: 87,
          column: 3
        }
      },
      "24": {
        start: {
          line: 83,
          column: 3
        },
        end: {
          line: 86,
          column: 6
        }
      },
      "25": {
        start: {
          line: 88,
          column: 30
        },
        end: {
          line: 88,
          column: 38
        }
      },
      "26": {
        start: {
          line: 90,
          column: 2
        },
        end: {
          line: 133,
          column: 6
        }
      },
      "27": {
        start: {
          line: 93,
          column: 4
        },
        end: {
          line: 129,
          column: 5
        }
      },
      "28": {
        start: {
          line: 94,
          column: 18
        },
        end: {
          line: 94,
          column: 32
        }
      },
      "29": {
        start: {
          line: 95,
          column: 5
        },
        end: {
          line: 123,
          column: 8
        }
      },
      "30": {
        start: {
          line: 96,
          column: 6
        },
        end: {
          line: 96,
          column: 25
        }
      },
      "31": {
        start: {
          line: 96,
          column: 15
        },
        end: {
          line: 96,
          column: 25
        }
      },
      "32": {
        start: {
          line: 97,
          column: 6
        },
        end: {
          line: 122,
          column: 7
        }
      },
      "33": {
        start: {
          line: 98,
          column: 54
        },
        end: {
          line: 98,
          column: 58
        }
      },
      "34": {
        start: {
          line: 99,
          column: 23
        },
        end: {
          line: 105,
          column: 8
        }
      },
      "35": {
        start: {
          line: 106,
          column: 7
        },
        end: {
          line: 116,
          column: 10
        }
      },
      "36": {
        start: {
          line: 107,
          column: 8
        },
        end: {
          line: 107,
          column: 27
        }
      },
      "37": {
        start: {
          line: 107,
          column: 17
        },
        end: {
          line: 107,
          column: 27
        }
      },
      "38": {
        start: {
          line: 108,
          column: 8
        },
        end: {
          line: 115,
          column: 11
        }
      },
      "39": {
        start: {
          line: 118,
          column: 7
        },
        end: {
          line: 121,
          column: 10
        }
      },
      "40": {
        start: {
          line: 125,
          column: 5
        },
        end: {
          line: 128,
          column: 8
        }
      },
      "41": {
        start: {
          line: 132,
          column: 4
        },
        end: {
          line: 132,
          column: 21
        }
      }
    },
    fnMap: {
      "0": {
        name: "(anonymous_0)",
        decl: {
          start: {
            line: 9,
            column: 1
          },
          end: {
            line: 9,
            column: 2
          }
        },
        loc: {
          start: {
            line: 9,
            column: 38
          },
          end: {
            line: 70,
            column: 2
          }
        },
        line: 9
      },
      "1": {
        name: "(anonymous_1)",
        decl: {
          start: {
            line: 23,
            column: 9
          },
          end: {
            line: 23,
            column: 10
          }
        },
        loc: {
          start: {
            line: 23,
            column: 21
          },
          end: {
            line: 66,
            column: 4
          }
        },
        line: 23
      },
      "2": {
        name: "(anonymous_2)",
        decl: {
          start: {
            line: 30,
            column: 24
          },
          end: {
            line: 30,
            column: 25
          }
        },
        loc: {
          start: {
            line: 30,
            column: 39
          },
          end: {
            line: 64,
            column: 6
          }
        },
        line: 30
      },
      "3": {
        name: "(anonymous_3)",
        decl: {
          start: {
            line: 32,
            column: 34
          },
          end: {
            line: 32,
            column: 35
          }
        },
        loc: {
          start: {
            line: 32,
            column: 49
          },
          end: {
            line: 63,
            column: 7
          }
        },
        line: 32
      },
      "4": {
        name: "(anonymous_4)",
        decl: {
          start: {
            line: 37,
            column: 14
          },
          end: {
            line: 37,
            column: 15
          }
        },
        loc: {
          start: {
            line: 37,
            column: 26
          },
          end: {
            line: 59,
            column: 9
          }
        },
        line: 37
      },
      "5": {
        name: "(anonymous_5)",
        decl: {
          start: {
            line: 48,
            column: 70
          },
          end: {
            line: 48,
            column: 71
          }
        },
        loc: {
          start: {
            line: 48,
            column: 86
          },
          end: {
            line: 57,
            column: 11
          }
        },
        line: 48
      },
      "6": {
        name: "(anonymous_6)",
        decl: {
          start: {
            line: 60,
            column: 15
          },
          end: {
            line: 60,
            column: 16
          }
        },
        loc: {
          start: {
            line: 60,
            column: 24
          },
          end: {
            line: 62,
            column: 9
          }
        },
        line: 60
      },
      "7": {
        name: "(anonymous_7)",
        decl: {
          start: {
            line: 67,
            column: 10
          },
          end: {
            line: 67,
            column: 11
          }
        },
        loc: {
          start: {
            line: 67,
            column: 19
          },
          end: {
            line: 69,
            column: 4
          }
        },
        line: 67
      },
      "8": {
        name: "(anonymous_8)",
        decl: {
          start: {
            line: 72,
            column: 1
          },
          end: {
            line: 72,
            column: 2
          }
        },
        loc: {
          start: {
            line: 72,
            column: 35
          },
          end: {
            line: 134,
            column: 2
          }
        },
        line: 72
      },
      "9": {
        name: "(anonymous_9)",
        decl: {
          start: {
            line: 92,
            column: 9
          },
          end: {
            line: 92,
            column: 10
          }
        },
        loc: {
          start: {
            line: 92,
            column: 21
          },
          end: {
            line: 130,
            column: 4
          }
        },
        line: 92
      },
      "10": {
        name: "(anonymous_10)",
        decl: {
          start: {
            line: 95,
            column: 45
          },
          end: {
            line: 95,
            column: 46
          }
        },
        loc: {
          start: {
            line: 95,
            column: 63
          },
          end: {
            line: 123,
            column: 6
          }
        },
        line: 95
      },
      "11": {
        name: "(anonymous_11)",
        decl: {
          start: {
            line: 106,
            column: 67
          },
          end: {
            line: 106,
            column: 68
          }
        },
        loc: {
          start: {
            line: 106,
            column: 83
          },
          end: {
            line: 116,
            column: 8
          }
        },
        line: 106
      },
      "12": {
        name: "(anonymous_12)",
        decl: {
          start: {
            line: 131,
            column: 10
          },
          end: {
            line: 131,
            column: 11
          }
        },
        loc: {
          start: {
            line: 131,
            column: 19
          },
          end: {
            line: 133,
            column: 4
          }
        },
        line: 131
      }
    },
    branchMap: {
      "0": {
        loc: {
          start: {
            line: 13,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 13,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        }, {
          start: {
            line: 13,
            column: 2
          },
          end: {
            line: 18,
            column: 3
          }
        }],
        line: 13
      },
      "1": {
        loc: {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 65,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 65,
            column: 5
          }
        }, {
          start: {
            line: 24,
            column: 4
          },
          end: {
            line: 65,
            column: 5
          }
        }],
        line: 24
      },
      "2": {
        loc: {
          start: {
            line: 33,
            column: 7
          },
          end: {
            line: 33,
            column: 26
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 33,
            column: 7
          },
          end: {
            line: 33,
            column: 26
          }
        }, {
          start: {
            line: 33,
            column: 7
          },
          end: {
            line: 33,
            column: 26
          }
        }],
        line: 33
      },
      "3": {
        loc: {
          start: {
            line: 38,
            column: 9
          },
          end: {
            line: 58,
            column: 10
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 38,
            column: 9
          },
          end: {
            line: 58,
            column: 10
          }
        }, {
          start: {
            line: 38,
            column: 9
          },
          end: {
            line: 58,
            column: 10
          }
        }],
        line: 38
      },
      "4": {
        loc: {
          start: {
            line: 45,
            column: 12
          },
          end: {
            line: 45,
            column: 78
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 45,
            column: 59
          },
          end: {
            line: 45,
            column: 66
          }
        }, {
          start: {
            line: 45,
            column: 69
          },
          end: {
            line: 45,
            column: 78
          }
        }],
        line: 45
      },
      "5": {
        loc: {
          start: {
            line: 45,
            column: 12
          },
          end: {
            line: 45,
            column: 56
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 45,
            column: 12
          },
          end: {
            line: 45,
            column: 32
          }
        }, {
          start: {
            line: 45,
            column: 36
          },
          end: {
            line: 45,
            column: 56
          }
        }],
        line: 45
      },
      "6": {
        loc: {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        }, {
          start: {
            line: 82,
            column: 2
          },
          end: {
            line: 87,
            column: 3
          }
        }],
        line: 82
      },
      "7": {
        loc: {
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 129,
            column: 5
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 129,
            column: 5
          }
        }, {
          start: {
            line: 93,
            column: 4
          },
          end: {
            line: 129,
            column: 5
          }
        }],
        line: 93
      },
      "8": {
        loc: {
          start: {
            line: 96,
            column: 6
          },
          end: {
            line: 96,
            column: 25
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 96,
            column: 6
          },
          end: {
            line: 96,
            column: 25
          }
        }, {
          start: {
            line: 96,
            column: 6
          },
          end: {
            line: 96,
            column: 25
          }
        }],
        line: 96
      },
      "9": {
        loc: {
          start: {
            line: 97,
            column: 6
          },
          end: {
            line: 122,
            column: 7
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 97,
            column: 6
          },
          end: {
            line: 122,
            column: 7
          }
        }, {
          start: {
            line: 97,
            column: 6
          },
          end: {
            line: 122,
            column: 7
          }
        }],
        line: 97
      },
      "10": {
        loc: {
          start: {
            line: 103,
            column: 18
          },
          end: {
            line: 103,
            column: 86
          }
        },
        type: "cond-expr",
        locations: [{
          start: {
            line: 103,
            column: 67
          },
          end: {
            line: 103,
            column: 74
          }
        }, {
          start: {
            line: 103,
            column: 77
          },
          end: {
            line: 103,
            column: 86
          }
        }],
        line: 103
      },
      "11": {
        loc: {
          start: {
            line: 103,
            column: 18
          },
          end: {
            line: 103,
            column: 64
          }
        },
        type: "binary-expr",
        locations: [{
          start: {
            line: 103,
            column: 18
          },
          end: {
            line: 103,
            column: 39
          }
        }, {
          start: {
            line: 103,
            column: 43
          },
          end: {
            line: 103,
            column: 64
          }
        }],
        line: 103
      },
      "12": {
        loc: {
          start: {
            line: 107,
            column: 8
          },
          end: {
            line: 107,
            column: 27
          }
        },
        type: "if",
        locations: [{
          start: {
            line: 107,
            column: 8
          },
          end: {
            line: 107,
            column: 27
          }
        }, {
          start: {
            line: 107,
            column: 8
          },
          end: {
            line: 107,
            column: 27
          }
        }],
        line: 107
      }
    },
    s: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0,
      "13": 0,
      "14": 0,
      "15": 0,
      "16": 0,
      "17": 0,
      "18": 0,
      "19": 0,
      "20": 0,
      "21": 0,
      "22": 0,
      "23": 0,
      "24": 0,
      "25": 0,
      "26": 0,
      "27": 0,
      "28": 0,
      "29": 0,
      "30": 0,
      "31": 0,
      "32": 0,
      "33": 0,
      "34": 0,
      "35": 0,
      "36": 0,
      "37": 0,
      "38": 0,
      "39": 0,
      "40": 0,
      "41": 0
    },
    f: {
      "0": 0,
      "1": 0,
      "2": 0,
      "3": 0,
      "4": 0,
      "5": 0,
      "6": 0,
      "7": 0,
      "8": 0,
      "9": 0,
      "10": 0,
      "11": 0,
      "12": 0
    },
    b: {
      "0": [0, 0],
      "1": [0, 0],
      "2": [0, 0],
      "3": [0, 0],
      "4": [0, 0],
      "5": [0, 0],
      "6": [0, 0],
      "7": [0, 0],
      "8": [0, 0],
      "9": [0, 0],
      "10": [0, 0],
      "11": [0, 0],
      "12": [0, 0]
    },
    _coverageSchema: "43e27e138ebf9cfc5966b082cf9a028302ed4184",
    hash: "e266ca44cafeeb3bbdb0897773a07e09b4e4260c"
  };
  var coverage = global[gcv] || (global[gcv] = {});

  if (coverage[path] && coverage[path].hash === hash) {
    return coverage[path];
  }

  return coverage[path] = coverageData;
}();

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports["default"] = void 0;

var _bcryptjs = _interopRequireDefault(require("bcryptjs"));

var _jsonwebtoken = _interopRequireDefault(require("jsonwebtoken"));

var _pool = _interopRequireDefault(require("../../config/pool"));

var _sql = require("../../models/users/sql");

var _user = _interopRequireDefault(require("../../validator/user"));

var _signin = _interopRequireDefault(require("../../validator/signin"));

var _isEmpty = _interopRequireDefault(require("../../validator/isEmpty"));

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError("Cannot call a class as a function"); } }

function _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if ("value" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }

function _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }

var userController =
/*#__PURE__*/
function () {
  function userController() {
    _classCallCheck(this, userController);
  }

  _createClass(userController, null, [{
    key: "createAccount",
    value: function createAccount(req, res, next) {
      cov_24uy7faoai.f[0]++;
      // Validate user input
      var error = (cov_24uy7faoai.s[0]++, (0, _user["default"])(req.body));
      var isValid = (cov_24uy7faoai.s[1]++, (0, _isEmpty["default"])(error));
      cov_24uy7faoai.s[2]++;

      if (!isValid) {
        cov_24uy7faoai.b[0][0]++;
        cov_24uy7faoai.s[3]++;
        return res.status(400).json({
          status: 'error',
          error: Object.values(error)[0]
        });
      } else {
        cov_24uy7faoai.b[0][1]++;
      }

      var _ref = (cov_24uy7faoai.s[4]++, req.body),
          firstName = _ref.firstName,
          lastName = _ref.lastName,
          email = _ref.email,
          password = _ref.password,
          gender = _ref.gender,
          jobRole = _ref.jobRole,
          department = _ref.department,
          address = _ref.address; //Check if email is already taken


      cov_24uy7faoai.s[5]++;

      _pool["default"].query(_sql.checkEmail, [email]).then(function (result) {
        cov_24uy7faoai.f[1]++;
        cov_24uy7faoai.s[6]++;

        if (result.rows.length > 0) {
          cov_24uy7faoai.b[1][0]++;
          cov_24uy7faoai.s[7]++;
          return res.status(400).json({
            status: 'error',
            error: 'Email already taken!!'
          });
        } else {
          cov_24uy7faoai.b[1][1]++;
          cov_24uy7faoai.s[8]++;

          _bcryptjs["default"].genSalt(10, function (err, salt) {
            cov_24uy7faoai.f[2]++;
            cov_24uy7faoai.s[9]++;

            //Hash Password of user and generate token
            _bcryptjs["default"].hash(password, salt, function (err, hash) {
              cov_24uy7faoai.f[3]++;
              cov_24uy7faoai.s[10]++;

              if (err) {
                cov_24uy7faoai.b[2][0]++;
                cov_24uy7faoai.s[11]++;
                throw err;
              } else {
                cov_24uy7faoai.b[2][1]++;
              }

              var values = (cov_24uy7faoai.s[12]++, [firstName, lastName, email, hash, gender, jobRole, department, address]);
              cov_24uy7faoai.s[13]++;

              _pool["default"].query(_sql.createUserQuery.createUser, values).then(function (result) {
                cov_24uy7faoai.f[4]++;
                cov_24uy7faoai.s[14]++;

                if (result.rowCount === 1) {
                  cov_24uy7faoai.b[3][0]++;

                  var _ref2 = (cov_24uy7faoai.s[15]++, result.rows[0]),
                      userId = _ref2.userId,
                      _firstName = _ref2.firstName,
                      _lastName = _ref2.lastName,
                      _email = _ref2.email;

                  var payload = (cov_24uy7faoai.s[16]++, {
                    userId: userId,
                    firstName: _firstName,
                    lastName: _lastName,
                    userName: (cov_24uy7faoai.b[5][0]++, _firstName == 'Chike') && (cov_24uy7faoai.b[5][1]++, _lastName == 'Ucheka') ? (cov_24uy7faoai.b[4][0]++, 'Admin') : (cov_24uy7faoai.b[4][1]++, _firstName),
                    email: _email
                  });
                  cov_24uy7faoai.s[17]++;

                  _jsonwebtoken["default"].sign(payload, process.env.JWT_KEY, {
                    expiresIn: '7d'
                  }, function (err, token) {
                    cov_24uy7faoai.f[5]++;
                    cov_24uy7faoai.s[18]++;
                    res.status(201).json({
                      status: 'success',
                      data: {
                        message: 'User account successfully created',
                        token: token,
                        userId: userId
                      }
                    });
                  });
                } else {
                  cov_24uy7faoai.b[3][1]++;
                }
              })["catch"](function (err) {
                cov_24uy7faoai.f[6]++;
                cov_24uy7faoai.s[19]++;
                console.log(err.stack);
              });
            });
          });
        }
      })["catch"](function (err) {
        cov_24uy7faoai.f[7]++;
        cov_24uy7faoai.s[20]++;
        console.log(err);
      });
    }
  }, {
    key: "signInUser",
    value: function signInUser(req, res, next) {
      cov_24uy7faoai.f[8]++;
      //Get user details
      //validate user details
      //check if there is a user with such email
      // decode the password of user returned
      // if match , generate token
      // Validate user input
      var error = (cov_24uy7faoai.s[21]++, (0, _signin["default"])(req.body));
      var isValid = (cov_24uy7faoai.s[22]++, (0, _isEmpty["default"])(error));
      cov_24uy7faoai.s[23]++;

      if (!isValid) {
        cov_24uy7faoai.b[6][0]++;
        cov_24uy7faoai.s[24]++;
        return res.status(400).json({
          status: 'error',
          error: Object.values(error)[0]
        });
      } else {
        cov_24uy7faoai.b[6][1]++;
      }

      var _ref3 = (cov_24uy7faoai.s[25]++, req.body),
          email = _ref3.email,
          password = _ref3.password;

      cov_24uy7faoai.s[26]++;

      _pool["default"].query(_sql.checkEmail, [email]).then(function (result) {
        cov_24uy7faoai.f[9]++;
        cov_24uy7faoai.s[27]++;

        if (result.rows.length >= 1) {
          cov_24uy7faoai.b[7][0]++;
          var user = (cov_24uy7faoai.s[28]++, result.rows[0]);
          cov_24uy7faoai.s[29]++;

          _bcryptjs["default"].compare(password, user.password, function (err, isMatch) {
            cov_24uy7faoai.f[10]++;
            cov_24uy7faoai.s[30]++;

            if (err) {
              cov_24uy7faoai.b[8][0]++;
              cov_24uy7faoai.s[31]++;
              throw err;
            } else {
              cov_24uy7faoai.b[8][1]++;
            }

            cov_24uy7faoai.s[32]++;

            if (isMatch) {
              cov_24uy7faoai.b[9][0]++;

              var _ref4 = (cov_24uy7faoai.s[33]++, user),
                  userId = _ref4.userId,
                  firstName = _ref4.firstName,
                  lastName = _ref4.lastName,
                  _email2 = _ref4.email;

              var payload = (cov_24uy7faoai.s[34]++, {
                userId: userId,
                firstName: firstName,
                lastName: lastName,
                userName: (cov_24uy7faoai.b[11][0]++, firstName === 'Chike') && (cov_24uy7faoai.b[11][1]++, lastName === 'Ucheka') ? (cov_24uy7faoai.b[10][0]++, 'Admin') : (cov_24uy7faoai.b[10][1]++, firstName),
                email: _email2
              });
              cov_24uy7faoai.s[35]++;

              _jsonwebtoken["default"].sign(payload, process.env.JWT_KEY, {
                expiresIn: '7d'
              }, function (err, token) {
                cov_24uy7faoai.f[11]++;
                cov_24uy7faoai.s[36]++;

                if (err) {
                  cov_24uy7faoai.b[12][0]++;
                  cov_24uy7faoai.s[37]++;
                  throw err;
                } else {
                  cov_24uy7faoai.b[12][1]++;
                }

                cov_24uy7faoai.s[38]++;
                return res.status(200).json({
                  status: 'success',
                  data: {
                    message: 'User successfully signin',
                    token: token,
                    userId: userId
                  }
                });
              });
            } else {
              cov_24uy7faoai.b[9][1]++;
              cov_24uy7faoai.s[39]++;
              return res.status(400).json({
                status: 'error',
                error: 'Invalid credentials'
              });
            }
          });
        } else {
          cov_24uy7faoai.b[7][1]++;
          cov_24uy7faoai.s[40]++;
          return res.status(400).json({
            status: 'error',
            error: 'Invalid credentials'
          });
        }
      })["catch"](function (err) {
        cov_24uy7faoai.f[12]++;
        cov_24uy7faoai.s[41]++;
        console.log(err);
      });
    }
  }]);

  return userController;
}();

var _default = userController;
exports["default"] = _default;